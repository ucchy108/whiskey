# CLAUDE.mdにGitワークフローを追加

**作業日**: 2026-01-24
**担当**: Claude Code
**ステータス**: 完了

## 目的

CLAUDE.mdにブランチ作成とPR作成のワークフロールールを記述し、Claude Codeが常にこのルールに従って作業できるようにする。

## 作業内容

### 18:56 - 作業開始

- ユーザーから「作業する際は、ブランチを切って、PRを作成してほしい」という要求を受ける
- CLAUDE.md vs Skills の使い分けについて説明
- ユーザーがCLAUDE.mdに記述することを選択

### 18:58 - Git ワークフローセクションの設計

以下の内容を含むセクションを設計：

1. **ブランチ戦略**
   - 作業開始時: 必ず新しいブランチを作成
   - ブランチ命名規則: `feature/`, `fix/`, `refactor/`, `docs/`
   - 作業中: こまめにコミット、Co-Authored-By 付与
   - 作業完了時: `/create-pr` Skillを使用

2. **禁止事項**
   - mainブランチへの直接コミット禁止
   - ブランチを切らずに作業開始禁止
   - push --force to main/master 禁止

3. **Claude Codeの動作**
   - タスク開始時: 自動的に新しいブランチを作成
   - タスク完了時: 「PRを作成しますか？」と確認

4. **Git操作の例**
   - ブランチ作成からPR作成までの一連の流れ

### 19:00 - CLAUDE.mdに追加

- 「開発時の注意事項」セクションの「テスト」サブセクションの後に追加
- 「## Git ワークフロー」セクションを新設

### 19:01 - 完了

- CLAUDE.mdへの追加完了
- 作業ログを記録

## 完了サマリー

### 実装内容

**追加したセクション:**
- `## Git ワークフロー` - 88行追加

**含まれる内容:**
1. ブランチ戦略（作業開始時、作業中、作業完了時）
2. ブランチ命名規則（feature/, fix/, refactor/, docs/）
3. 禁止事項（mainへの直接コミット等）
4. Claude Codeの動作（自動ブランチ作成、PR作成確認）
5. Git操作の例（実際のコマンド例）

### 変更ファイル一覧

- `CLAUDE.md` - Gitワークフローセクション追加（88行）

### Claude Codeの動作変更

**タスク開始時:**
1. ユーザーから新しいタスクを受け取る
2. **自動的に新しいブランチを作成**（ブランチ名を提案）
3. 作業を開始

**タスク完了時:**
1. 変更をコミット
2. **ユーザーに「PRを作成しますか？」と確認**
3. 承認されたら `/create-pr` Skillを実行
4. PRを作成してURLを報告

### ブランチ命名規則

| タイプ | プレフィックス | 例 |
|--------|--------------|-----|
| 機能追加 | `feature/` | `feature/add-workout-form` |
| バグ修正 | `fix/` | `fix/health-check-error` |
| リファクタリング | `refactor/` | `refactor/clean-architecture` |
| ドキュメント | `docs/` | `docs/update-readme` |

### 次のステップ

- [ ] 実際のタスクで新しいワークフローをテスト
- [ ] create-pr Skillとの連携確認
- [ ] PRテンプレートの作成（必要に応じて）

## 備考

- CLAUDE.md vs Skills: ルールはCLAUDE.md、アクションはSkills
- 既存の `create-pr` Skillと連携
- Claude Codeが常にCLAUDE.mdを参照して、自動的にルールに従う
