# Phase 3.2 ワークアウト記録画面

**作業日**: 2026-02-08
**担当**: Claude Code
**ステータス**: 完了

## 目的

Phase 3.2のフロントエンド実装として、ワークアウト記録・一覧・詳細画面を実装する。

## 作業内容

### 作業開始 - 計画策定

- mainブランチから`feat/phase3.2-workout-pages`ブランチを作成
- 既存コードの調査と実装計画の策定

### 実装（全10ステップ完了）

- Step 1: API レイヤー（exercise/api.ts, workout/api.ts）
- Step 2: Zod スキーマ + テスト（18テスト）
- Step 3: 共通レイアウト（Layout + Sidebar）
- Step 4: ExerciseSelector（MUI Autocomplete + テスト）
- Step 5: SetInputRow（セット入力行 + テスト）
- Step 6: ExerciseBlock（種目ブロック + テスト）
- Step 7: WorkoutForm（フォーム全体 + テスト）
- Step 8: WorkoutFormPage（記録画面 + サマリーパネル + テスト）
- Step 9: WorkoutCard + WorkoutSetsTable + テスト
- Step 10: WorkoutListPage + WorkoutDetailPage + テスト

## 完了サマリー

### 実装内容

- **共通レイアウト**: サイドバー（240px, ダーク背景）+ メインコンテンツ、ProtectedRouteと統合
- **ワークアウト記録画面**: フォーム（日付・種目選択・セットテーブル・メモ）+ リアルタイムサマリーパネル
- **ワークアウト一覧画面**: 検索・フィルター・ページネーション付きカードリスト
- **ワークアウト詳細画面**: セットテーブル・メモ編集・セット追加/削除・サマリーパネル
- **API レイヤー**: exercise/workout の全CRUD操作
- **Zod スキーマ**: setInput, exerciseBlock, workoutForm, memo

### 変更ファイル一覧

**新規作成**:
- `features/exercise/api.ts` — Exercise API クライアント
- `features/exercise/components/ExerciseSelector/` — 種目選択コンポーネント
- `features/workout/api.ts` — Workout API クライアント
- `features/workout/schemas.ts` — Zod バリデーションスキーマ
- `features/workout/schemas.test.ts` — スキーマテスト
- `features/workout/components/SetInputRow/` — セット入力行
- `features/workout/components/ExerciseBlock/` — 種目ブロック
- `features/workout/components/WorkoutForm/` — ワークアウトフォーム
- `features/workout/components/WorkoutCard/` — ワークアウトカード（一覧用）
- `features/workout/components/WorkoutSetsTable/` — セットテーブル（詳細用）
- `features/workout/pages/WorkoutFormPage/` — 記録画面
- `features/workout/pages/WorkoutListPage/` — 一覧画面（プレースホルダ置き換え）
- `features/workout/pages/WorkoutDetailPage/` — 詳細画面（プレースホルダ置き換え）
- `shared/components/Layout/` — 共通レイアウト

**変更**:
- `routes/index.tsx` — Layout適用 + /workouts/new ルート追加
- `shared/components/index.ts` — Layout export追加
- `features/exercise/index.ts` — exerciseApi, ExerciseSelector export追加
- `features/workout/index.ts` — 全コンポーネント export追加

### テスト結果

- 新規テスト: 53テスト全パス
- 既存テスト: 47テスト全パス（useAuth の4件は環境依存の既知問題）
- Storybookビルド: 成功

### 次のステップ

- Phase 3.3: ダッシュボード（ヒートマップ、進捗グラフ）
- 重量推移グラフの実装（WorkoutDetailPage のプレースホルダ）
